@*
    //------------------------------------------------------------------------------
    // <auto-generated>
    //    This code was generated from a template.
    //
    //    Creador : Administrator
    //    Dominio : OSISPC
    //    Pc      : OSISPC
    //    Fecha   : 5/17/2014 6:45:14 AM
    //
    //    Manual changes to this file may cause unexpected behavior in your application.
    //    Manual changes to this file will be overwritten if the code is regenerated.
    // </auto-generated>
    //------------------------------------------------------------------------------

*@
@using Mvc.Core.UI
@using OSIS.PEPPAM.Mvc.UI
@model OSIS.PEPPAM.Mvc.Models.Sistemas_Slides_MasterModel
@{
    IFuncionality uiObject = new Funcionality().GetFuncionality("Sistemas_Slides_Master");

    ViewBag.Title = Resources.Shared.AppName + " - " + uiObject.Name;
}

<div class="form">
    <h2>@uiObject.Name</h2>
    <h5>@uiObject.Description</h5>
    <div class="row">
        <div class="grid-commands-container grid-top-buttons col-xs-5">
            @ToolbarButtons()
        </div>
        <div class="form-inline grid-view-search col-xs-7">
            <div class="form-group pull-right">
                <input type="text" name="search" class="form-control search-box input-sm" value="" id="Sistemas_Slides_MasterSearch" placeholder="@uiObject.GetMessages("DoSearch").Description" />
                <div class="btn-group">
                    <button type="button" class="btn btn-default btn-sm btn-default search-button" title="@uiObject.GetAction("DoSearch")"><span class="glyphicon glyphicon-search"></span></button>
                    <button type="button" class="btn btn-default btn-sm clean-button" title="@uiObject.GetAction("Clean")"><span class="glyphicon glyphicon-remove"></span></button>
                </div>
            </div>
        </div>
    </div>
    <table id="Sistemas_Slides_MasterGrid" class="table table-striped table-bordered" width="100%"></table>
    <div class="grid-commands-container grid-bottom-buttons">
        @ToolbarButtons()
    </div>
</div>
@helper ToolbarButtons()
{
    IFuncionality uiObject = new Funcionality().GetFuncionality("Sistemas_Slides_Master");

    <button class="btn btn-default btn-sm create-button" title="@uiObject.GetAction("Create").Help"><span class="glyphicon glyphicon-plus-sign"></span>@uiObject.GetAction("Create").Description</button>
    
}
<img width="50"/>
@section scripts
{
    <script type="text/javascript">
        $(function () {
            var gridId = "Sistemas_Slides_MasterGrid";

            gridUtils.setupGridToolbarButtons({
                gridId: gridId,
                toolbarContainerSelector: ".grid-bottom-buttons, .grid-top-buttons",
                addUrl: "@Url.Action("Create")",
                reportUrl: "@Url.Action("Report")"
            });
            gridUtils.setupGridSearchBox({
                gridId: gridId,
                searchContainerSelector: ".grid-view-search"
            });
            gridUtils.setupGridRowButtons({ gridId: gridId });

            $("#" + gridId).dataTable({
                "aoColumns": [


                @Html.Raw(uiObject.GetGridColumnsArray("Sistemas_Slides_Master")),
                {
                    sClass: "row-options",
                    bSortable: false,
                    mData: null,
                    mRender: function (data, type, datasource) {
                        var rowId = datasource.Slide_Secuencia;
                        var editHtml = '<a href="@Url.Action("Edit")?slide_Secuencia=' + rowId + '" class="row-edit btn btn-md" title="@uiObject.GetAction("Edit").Description"><span class="glyphicon glyphicon-pencil" /></a>';
                        var deleteHtml = '<a href="@Url.Action("Delete")?slide_Secuencia=' + rowId + '" class="row-delete btn btn-sm btn-danger" title="@uiObject.GetAction("Delete").Description"><span class="glyphicon glyphicon-remove" /></a>';
                        return editHtml + deleteHtml;
                    }
                }
                ],
                "columnDefs": [
            {
                // The `data` parameter refers to the data for the cell (defined by the
                // `data` option, which defaults to the column being worked with, in
                // this case `data: 0`.
                "render": function (data, type, row) {
                    console.log(row);
                    var img = '<img width="150" src="@Url.Content("~/UploadFiles/Slides/")' + data + '"/>';
                    return img;
                },
                "targets": 7
            },
            {
                "render": function (data, type, row) {
                    console.log(row);
                    var img = '<img width="150" src="@Url.Content("~/UploadFiles/Slides/")' + data + '"/>';
                    return img;
                },
                "targets": 0
            }
            
                ],
                "aaSorting":
                [[1, "asc"]],
                "oLanguage":
            datatables_locale,
                "bProcessing":
            true,
                "bFilter":
            true,
                "bServerSide":
            true,
                "sAjaxSource":
            "@Url.Action("Load")",
                "sServerMethod":
            "POST",
                
                "bStateSave":
            true,
                "sCookiePrefix":
            "fapa_",
                "fnCookieCallback":

            function (sName, oData, sExpires, sPath) {
                return sName + "=" + JSON.stringify(oData) + ";path=" + sPath;
            },
                "fnStateLoaded":

                function (oSettings) {
                    var search = oSettings.oPreviousSearch;
                    if (search) {
                        $("input.search-box").val(search.sSearch);
                    }
                }
            });
        });
    </script>
}



