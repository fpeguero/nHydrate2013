//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Creador : Administrator
//    Dominio : OSISPC
//    Pc      : OSISPC
//    Fecha   : 5/4/2014 3:34:24 PM
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using OSIS.PEPPAM.Mvc.Models;

namespace OSIS.PEPPAM.Mvc.Controllers
{
	public partial class Turnos_MasterController : Turnos_MasterControllerBase
	{
			// Put your controller's initialization logic here


        //[HttpPost]
        //public override ActionResult Create(Turnos_MasterModel turnosMaster)
        //{
        //    if (ModelState.IsValid)
        //    {

        //        //Campos Auditorias
        //        turnosMaster.Registro_Fecha = DateTime.Now;
        //        turnosMaster.Registro_Usuario = User.Identity.Name;

        //        var result = turnosMaster.Save();
                
        //        if (result)
        //        {


        //            foreach (var dia in turnosMaster.DiasSelect)
        //            {
        //                var turnosDias = new Turnos_Dias_TransModel()
        //                {
        //                    Dia_Secuencia = Convert.ToInt32(dia),
        //                    Turno_Numero = turnosMaster.Turno_Numero,

        //                    Registro_Estado = "A",
        //                    Registro_Fecha = DateTime.Now,
        //                    Registro_Usuario = User.Identity.Name,
        //                };

        //                turnosDias.Save();
        //            }
                    
        //            return RedirectToAction("Edit", new
        //            {
        //                turno_Numero = turnosMaster.Turno_Numero
        //            });
        //        }

        //    }

        //    ViewBag.IsNew = true;
        //    return View(turnosMaster);

        //}






        //public override ActionResult Edit(int turno_Numero)
        //{

        //    var turnosMaster = Turnos_MasterModel.LoadByEntityKey(turno_Numero.ToString());

        //    turnosMaster.DiasSelect = turnosMaster.TurnosDiasTrans.Select(x => x.Dia_Secuencia.ToString());

        //    ViewBag.IsNew = false;

        //    return View(turnosMaster);
        //}

        //[HttpPost]
        //public override ActionResult Edit(Turnos_MasterModel turnosMaster)
        //{

        //    if (ModelState.IsValid)
        //    {
        //        //Campos Auditorias
        //        turnosMaster.Registro_Fecha = DateTime.Now;
        //        turnosMaster.Registro_Usuario = User.Identity.Name;
                
        //        var result = turnosMaster.Save();

        //        if (result)
        //        {
        //            var deleteTurnos = Turnos_Dias_TransModel.Deleteturnos(turnosMaster.Turno_Numero);

        //            foreach (var dia in turnosMaster.DiasSelect)
        //            {
        //                var turnosDias = new Turnos_Dias_TransModel()
        //                {
        //                    Dia_Secuencia = Convert.ToInt32(dia),
        //                    Turno_Numero = turnosMaster.Turno_Numero,

        //                    Registro_Estado = "A",
        //                    Registro_Fecha = DateTime.Now,
        //                    Registro_Usuario = User.Identity.Name,
        //                };

        //                turnosDias.Save();
        //            }




        //            return RedirectToAction("Index");
        //        }
        //    }

        //    ViewBag.IsNew = false;
        //    return View(turnosMaster);
        //}
	}
}

